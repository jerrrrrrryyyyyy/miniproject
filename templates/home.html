<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Complaint page</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <script src="{{ url_for('static', filename='script.js') }}"></script>
</head>
<body>
    <div class="header">
        <h1>Hello, {{ current_user.username }}</h1>
        <div class="button-group">
            <button onclick="location.href='/adddata'">+ Add Prompt</button>
            <button onclick="location.href='/logout'">Log Out</button>
        </div>
    </div>

    {% set role_names = [] %}
    {% for r in current_user.roles %}
        {% set _ = role_names.append(r.name) %}
    {% endfor %}

    <div class="card-container">
    {% for complaint in complaints %}
    <div class="complaint-card {{ complaint.complaint_type | lower }}">
        <div class="card-left">
            <h3 class="heading">{{ complaint.complaint_headline }}</h3>
            <p class="subheading">Complaint Description</p>
            <p class="description">{{ complaint.complaint_text }}</p>
        </div>

        <div class="card-right">
            <div class="badge-row">
                <span class="category-badge {{ complaint.complaint_type | lower }}">
                    {{ complaint.complaint_type }}
                </span>
                <span class="status-badge {{ complaint.status | lower }}">
                    {{ complaint.status }}
                </span>
            </div>

            {% if 'Teacher' in role_names %}
                <a class="card-btn" href="/delete/{{ complaint.complaint_id }}">DELETE</a>
                <a class="card-btn" href="{{ url_for('update_status', complaint_id=complaint.complaint_id) }}">update</a>
            {% endif %}
        </div>
    </div>
    {% endfor %}
</div>

</body>

</html> 